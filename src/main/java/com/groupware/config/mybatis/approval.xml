<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
	<mapper namespace="com.groupware.approval.dao.ApprovalDao">
	
	<select id="gListApproval" parameterType="map" resultType="map">
	select DIV_APV_TB.DIV_APV_NM, APV_TB.APV_SQ, APV_TB.DIV_APV_SQ, APV_TB.STF_SQ, APV_TB.STF_MID_SQ, 
	       APV_TB.STF_FNL_SQ, APV_TB.APV_OK_SQ, APV_TB.APV_NM, APV_TB.APV_PL_RT, APV_TB.APV_PL_NM, 
	       APV_TB.APV_NO, to_char(trunc(APV_TB.APV_CR_DATE), 'yyyy.mm.dd') as "APV_CR_DATE" 
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '1'
	and rownum &lt;= '3'
	</select>
	
	<select id="cListApproval" parameterType="map" resultType="map">
	select  DIV_APV_TB.DIV_APV_NM, APV_TB.APV_SQ, APV_TB.DIV_APV_SQ, APV_TB.STF_SQ, APV_TB.STF_MID_SQ, 
	        APV_TB.STF_FNL_SQ, APV_TB.APV_OK_SQ, APV_TB.APV_NM, APV_TB.APV_PL_RT, APV_TB.APV_PL_NM, 
	        APV_TB.APV_NO, to_char(trunc(APV_TB.APV_CR_DATE), 'yyyy.mm.dd') as "APV_CR_DATE"
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '2'
	and rownum &lt;= '3'
	</select>

	<select id="mListApproval" parameterType="map" resultType="map">
	select  DIV_APV_TB.DIV_APV_NM, APV_TB.APV_SQ, APV_TB.DIV_APV_SQ, APV_TB.STF_SQ, APV_TB.STF_MID_SQ, 
	        APV_TB.STF_FNL_SQ, APV_TB.APV_OK_SQ, APV_TB.APV_NM, APV_TB.APV_PL_RT, APV_TB.APV_PL_NM, 
	        APV_TB.APV_NO, to_char(trunc(APV_TB.APV_CR_DATE), 'yyyy.mm.dd') as "APV_CR_DATE"
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '3'
	and rownum &lt;= '3'
	</select>

	<select id="eListApproval" parameterType="map" resultType="map">
	select  DIV_APV_TB.DIV_APV_NM, APV_TB.APV_SQ, APV_TB.DIV_APV_SQ, APV_TB.STF_SQ, APV_TB.STF_MID_SQ, 
	        APV_TB.STF_FNL_SQ, APV_TB.APV_OK_SQ, APV_TB.APV_NM, APV_TB.APV_PL_RT, APV_TB.APV_PL_NM, 
	        APV_TB.APV_NO, to_char(trunc(APV_TB.APV_CR_DATE), 'yyyy.mm.dd') as "APV_CR_DATE"
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '4'
	and rownum &lt;= '3'
	</select>


	<select id="gListCountApproval" parameterType="map" resultType="map">
    select count(DIV_APV_TB.DIV_APV_NM) as "GLISTCOUNT"
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '1'
	</select>

	<select id="cListCountApproval" parameterType="map" resultType="map">
    select count(DIV_APV_TB.DIV_APV_NM) as "CLISTCOUNT" 
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '2'
	</select>
	
	<select id="mListCountApproval" parameterType="map" resultType="map">
    select count(DIV_APV_TB.DIV_APV_NM) as "MLISTCOUNT"  
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '3'
	</select>

	<select id="eListCountApproval" parameterType="map" resultType="map">
    select count(DIV_APV_TB.DIV_APV_NM) as "ELISTCOUNT" 
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '4'
	</select>

	<!-- 일반 진행 -->
	<select id="gProgress" parameterType="map" resultType="map">
    select count(DIV_APV_TB.DIV_APV_NM) - count(APV_TB.STF_FNL_SQ) Progress
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '1'
	</select>

	<!-- 협조 진행 -->
	<select id="cProgress" parameterType="map" resultType="map">
    select count(DIV_APV_TB.DIV_APV_NM) - count(APV_TB.STF_FNL_SQ) Progress
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '2'
	</select>

	<!-- 기타 진행 -->
	<select id="eProgress" parameterType="map" resultType="map">
    select count(DIV_APV_TB.DIV_APV_NM) - count(APV_TB.STF_FNL_SQ) Progress
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '4'
	</select>

	<!-- 메모 진행 -->
	<select id="mProgress" parameterType="map" resultType="map">
    select count(DIV_APV_TB.DIV_APV_NM) - count(APV_TB.STF_FNL_SQ) Progress
	from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '3'
	</select>

	<!-- 일반결재완결 -->
	<select id="gEndApproval" parameterType="map" resultType="map">
    select count(APV_TB.STF_FNL_SQ) gEndApproval 
    from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '1'
	</select>

	<select id="cEndApproval" parameterType="map" resultType="map">
	select count(APV_TB.STF_FNL_SQ) cEndApproval 
    from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = '62'
	and APV_TB.DIV_APV_SQ = '2'
	</select>

	<select id="eEndApproval" parameterType="map" resultType="map">
	select count(APV_TB.STF_FNL_SQ) eEndApproval 
    from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '4'
	</select>

	<select id="mEndApproval" parameterType="map" resultType="map">
	select count(APV_TB.STF_FNL_SQ) mEndApproval 
    from APV_TB, DIV_APV_TB
	where DIV_APV_TB.DIV_APV_SQ = APV_TB.DIV_APV_SQ
	and APV_TB.STF_SQ = #{stf_sq}
	and APV_TB.DIV_APV_SQ = '3'
	</select>

	</mapper>
  